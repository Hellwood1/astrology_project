{"version":3,"file":"index.js","sources":["../src/js/modal.js","../src/js/audio.js","../src/js/matrix-slider.js"],"sourcesContent":["const refs = {\n  openBtn: document.querySelector('.mobile-menu-btn'),\n  closeBtn: document.querySelector('.close-menu-btn'),\n  mobileMenu: document.querySelector('.mobile-menu-wrapper'),\n};\n\nfunction openMenu() {\n  refs.mobileMenu?.classList.add('is-open');\n}\n\nfunction closeMenu() {\n  refs.mobileMenu?.classList.remove('is-open');\n}\n\nrefs.openBtn?.addEventListener('click', openMenu);\nrefs.closeBtn?.addEventListener('click', closeMenu);\n","// audio\nconst audio = document.getElementById('bgMusic');\nconst soundBtn = document.querySelector('.sound-btn');\nconst soundText = soundBtn.querySelector('.sound-btn-text');\nconst soundIcon = soundBtn.querySelector('.sound-svg use'); // обов'язково <use>, не svg\n\nfunction updateButtonState() {\n  if (audio.paused) {\n    soundText.textContent = 'Відтворити';\n    soundIcon.setAttribute('href', '../img/sprite.svg#play-icon');\n  } else {\n    soundText.textContent = 'Зупинити';\n    soundIcon.setAttribute('href', '../img/sprite.svg#pause-icon');\n  }\n}\n\nfunction tryPlay() {\n  audio.play().then(() => {\n    updateButtonState();\n  }).catch((e) => {\n    console.warn('Audio play failed', e);\n  });\n\n  document.removeEventListener('click', tryPlay);\n  document.removeEventListener('scroll', tryPlay);\n  document.removeEventListener('keydown', tryPlay);\n}\n\ndocument.addEventListener('click', tryPlay);\ndocument.addEventListener('scroll', tryPlay);\ndocument.addEventListener('keydown', tryPlay);\n\nsoundBtn.addEventListener('click', () => {\n  if (audio.paused) {\n    audio.play();\n  } else {\n    audio.pause();\n  }\n  updateButtonState();\n});","const slider = document.querySelector('.matrix-services-list');\nconst items = document.querySelectorAll('.matrix-services-list-item');\nconst prevBtn = document.querySelector('.arrow-btn.prev');\nconst nextBtn = document.querySelector('.arrow-btn.next');\n\nlet startX = 0;\nlet current = 0;\nlet previous = 0;\nlet dragging = false;\nlet animationFrame;\n\nconst cardWidth = items[0].offsetWidth + 30;\n\n// -------------------- Свайпер --------------------\nslider.addEventListener('touchstart', (e) => {\n  dragging = true;\n  startX = e.touches[0].clientX;\n  slider.style.transition = 'none';\n  animationFrame = requestAnimationFrame(updateSlider);\n});\n\nslider.addEventListener('touchmove', (e) => {\n  if (!dragging) return;\n  const x = e.touches[0].clientX;\n  current = previous + (x - startX);\n});\n\nslider.addEventListener('touchend', () => {\n  dragging = false;\n  cancelAnimationFrame(animationFrame);\n  handleLimitScroll();\n});\n\nfunction updateSlider() {\n  slider.style.transform = `translateX(${current}px)`;\n  if (dragging) requestAnimationFrame(updateSlider);\n}\n\n// -------------------- Карусель для ПК версії --------------------\nif (prevBtn && nextBtn) {\n  prevBtn.addEventListener('click', (e) => {\n    current += cardWidth;\n    handleLimitScroll('left');\n    animateVisibleCards('left');\n    e.currentTarget.blur();\n  });\n\n  nextBtn.addEventListener('click', (e) => {\n    current -= cardWidth;\n    handleLimitScroll('right');\n    animateVisibleCards('right');\n    e.currentTarget.blur();\n  });\n}\n\n// -------------------- Реалізовано обмеження прокруту, струс та зникання кнопки --------------------\nfunction handleLimitScroll(direction = '') {\n  const maxShift = slider.offsetWidth - slider.scrollWidth;\n\n  const prev = current;\n  current = Math.max(Math.min(0, current), maxShift);\n\n  slider.style.transition = 'transform var(--timing-function)';\n  slider.style.transform = `translateX(${current}px)`;\n  previous = current;\n\n  toggleArrowButtons(current, maxShift);\n\n  if (current === 0 && direction === 'left') {\n    shakeCard('first');\n  } else if (current === maxShift && direction === 'right') {\n    shakeCard('last');\n  }\n}\n\n// -------------------- Реалізовано анімування карток --------------------\nfunction animateVisibleCards(direction) {\n  const visibleCard = getVisibleCard();\n  if (visibleCard) {\n    visibleCard.classList.remove('slide-in-left', 'slide-in-right');\n    requestAnimationFrame(() => {\n      visibleCard.classList.add(direction === 'left' ? 'slide-in-left' : 'slide-in-right');\n    });\n  }\n}\n\nfunction getVisibleCard() {\n  return [...items].find((item) => {\n    const rect = item.getBoundingClientRect();\n    const parentRect = slider.getBoundingClientRect();\n    return rect.left >= parentRect.left && rect.right <= parentRect.right;\n  });\n}\n\n// -------------------- Реалізовано візуал для показу останньої картки в списку --------------------\nfunction shakeCard(position) {\n  let target;\n  if (position === 'first') {\n    target = items[0];\n  } else if (position === 'last') {\n    target = items[items.length - 1];\n  }\n\n  if (target) {\n    target.classList.add('shake');\n    target.addEventListener('animationend', () => {\n      target.classList.remove('shake');\n    }, { once: true });\n  }\n}\n\n// -------------------- Зникання лівої та правої кнопки за умови останнього елементу в каруселі --------------------\nfunction toggleArrowButtons(current, maxShift) {\n  if (current === 0) {\n    prevBtn.style.opacity = '0';\n    prevBtn.style.pointerEvents = 'none';\n  } else {\n    prevBtn.style.opacity = '1';\n    prevBtn.style.pointerEvents = 'auto';\n  }\n\n  if (current === maxShift) {\n    nextBtn.style.opacity = '0';\n    nextBtn.style.pointerEvents = 'none';\n  } else {\n    nextBtn.style.opacity = '1';\n    nextBtn.style.pointerEvents = 'auto';\n  }\n}\n"],"names":["refs","openMenu","_a","closeMenu","audio","soundBtn","soundText","soundIcon","updateButtonState","tryPlay","slider","items","prevBtn","nextBtn","startX","current","previous","dragging","animationFrame","cardWidth","updateSlider","x","handleLimitScroll","animateVisibleCards","direction","maxShift","toggleArrowButtons","shakeCard","visibleCard","getVisibleCard","item","rect","parentRect","position","target"],"mappings":"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"}